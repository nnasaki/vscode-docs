---
Order: 113
TOCTitle: August 2025
PageTitle: Visual Studio Code August 2025
MetaDescription: Visual Studio Code August 2025 リリース（1.104）の新機能について説明します
MetaSocialImage: 1_104/release-highlights.png
Date: 2025-09-11
DownloadVersion: 1.104.1
---
# August 2025 (version 1.104)

_リリース日: 2025年9月11日_

**Update 1.104.1**: このアップデートは、これらの[問題](https://github.com/microsoft/vscode/issues?q=is%3Aissue+is%3Aclosed+milestone%3A%22August+2025+Recovery+1%22+)に対処しています。

<!-- DOWNLOAD_LINKS_PLACEHOLDER -->

---

Visual Studio Code の August 2025 リリースへようこそ。このバージョンには多くのアップデートが含まれており、気に入っていただけることを願っています。主なハイライトは次のとおりです：

<table class="highlights-table">
  <tr>
    <th>モデルの柔軟性</th>
    <th>セキュリティ</th>
    <th>生産性</th>
  </tr>
  <tr>
    <td>VS Code に最適なモデルを選択させる <a href="#auto-model-selection-preview"><br>詳細を表示</a></td>
    <td>機密ファイルの編集を確認する <a href="#confirm-edits-to-sensitive-files"><br>詳細を表示</a></td>
    <td>チャットファイル編集から邪魔な要素を除去 <a href="#improved-changed-files-experience"><br>詳細を表示</a></td>
  </tr>
  <tr>
    <td>VS Code 拡張機能を通じてモデルを提供 <a href="#language-model-chat-provider-api"><br>詳細を表示</a></td>
    <td>エージェントが安全にターミナルコマンドを実行できるようにする <a href="#terminal-auto-approve"><br>詳細を表示</a></td>
    <td>AGENTS.md を使用してチャットコンテキストを追加 <a href="#support-for-agentsmd-files-experimental"><br>詳細を表示</a></td>
  </tr>
</table>

<br>

>これらのリリースノートをオンラインで読みたい場合は、[code.visualstudio.com](https://code.visualstudio.com) の [Updates](https://code.visualstudio.com/updates) にアクセスしてください。<br>

> **Insiders: 新機能をできるだけ早く試したいですか？**<br>
> 夜間の Insiders ビルドをダウンロードして、最新のアップデートが利用可能になり次第すぐに試すことができます。<br>
> [Insiders をダウンロード](https://code.visualstudio.com/insiders)<br>

<!-- TOC
<div class="toc-nav-layout">
  <nav id="toc-nav">
    <div>このアップデートについて</div>
    <ul>
      <li><a href="#chat">チャット</a></li>
      <li><a href="#mcp">MCP</a></li>
      <li><a href="#accessibility">アクセシビリティ</a></li>
      <li><a href="#code-editing">コード編集</a></li>
      <li><a href="#editor-experience">エディターエクスペリエンス</a></li>
      <li><a href="#notebooks">ノートブック</a></li>
      <li><a href="#source-control">ソース管理</a></li>
      <li><a href="#terminal">ターミナル</a></li>
      <li><a href="#languages">言語</a></li>
      <li><a href="#contributions-to-extensions">拡張機能への貢献</a></li>
      <li><a href="#extension-authoring">拡張機能の作成</a></li>
      <li><a href="#proposed-apis">提案された API</a></li>
      <li><a href="#engineering">エンジニアリング</a></li>
      <li><a href="#notable-fixes">注目すべき修正</a></li>
      <li><a href="#thank-you">謝辞</a></li>
    </ul>
  </nav>
  <div class="notes-main">
Navigation End -->

## チャット

### 自動モデル選択（プレビュー）

このイテレーションでは、チャットに自動モデル選択を導入しています。モデルピッカーで **Auto** モデルを選択すると、VS Code が自動的にモデルを選択して、最適なパフォーマンスを確保し、レート制限を軽減します。

自動モデル選択は現在プレビュー段階であり、個人の Copilot プランから始まって、今後数週間で VS Code のすべての GitHub Copilot ユーザーに展開予定です。

![Screenshot that shows the model picker in the Chat view, showing the Auto option.](images/1_104/model-dropdown-auto.png)

Auto は、組織がこれらのモデルへのアクセスを無効にしていない限り、Claude Sonnet 4、GPT-5、GPT-5 mini、GPT-4.1 の中から選択します。自動モデル選択を使用する場合、VS Code は選択されたモデルに基づいて可変のモデル乗数を使用します。有料ユーザーの場合、auto は 10% のリクエスト割引を適用します。

チャットビューで応答をホバーすることで、選択されたモデルとモデル乗数を表示できます。

![Screenshot of a chat response, showing the selected model on hover.](images/1_104/auto-model-multiplier.png)

[VS Code での自動モデル選択](https://code.visualstudio.com/docs/copilot/customization/language-models)について詳しく学んでください。

### 機密ファイルの編集確認

**設定**: `setting(chat.tools.edits.autoApprove)`

エージェントモードでは、エージェントはワークスペース内のファイルを自律的に編集することができます。これには、設定ファイルなどの重要なファイルの偶発的または悪意のある変更や削除が含まれる可能性があり、マシンに即座に悪影響を及ぼす可能性があります。[AI駆動開発ツール使用時のセキュリティ考慮事項](https://code.visualstudio.com/docs/copilot/security)について詳しく学んでください。

このリリースでは、エージェントは特定のファイルを編集する前に明示的にユーザーの確認を求めるようになりました。これにより、エージェントモード使用時に追加の安全層が提供されます。`setting(chat.tools.edits.autoApprove)` 設定を使用して、確認が必要なファイルパターンを設定できます。

一般的なシステムフォルダー、ドットファイル、およびワークスペース外のファイルは、デフォルトで確認が必要になります。

![Screenshot showing the confirmation dialog for sensitive file edits in the Chat view.](images/1_104/chat-edit-sensitive-file.png)

### AGENTS.md ファイルのサポート（実験的）

**設定**: `setting(chat.useAgentsMdFile)`

`AGENTS.md` ファイルを使用すると、エージェントにコンテキストと指示を提供できます。このリリースから、ワークスペースルートに `AGENTS.md` ファイルがある場合、チャットリクエストのコンテキストとして自動的に取得されます。これは、複数の AI エージェントを使用するチームに役立ちます。

`AGENTS.md` ファイルのサポートはデフォルトで有効になっており、`setting(chat.useAgentsMdFile)` 設定で制御できます。`AGENTS.md` ファイルについて詳しくは、<https://agents.md/> を参照してください。

[VS Code でのチャットのカスタマイズ](https://code.visualstudio.com/docs/copilot/customization/overview)について詳しく学んで、実践やチームワークフローに合わせてください。

### 変更ファイル体験の改善

このイテレーションでは、変更ファイルリストがいくつかの便利機能で再構築されました。これらの変更により、エージェントモードで作業する際の体験が向上するはずです！

* 変更ファイルのリストはデフォルトで折りたたまれ、チャット会話により多くのスペースを提供します。折りたたまれている間でも、変更されたファイル数と追加または削除された行数を確認できます。

* 提案された変更を保持または受け入れると、ファイルは変更ファイルリストから削除されます。

* ソース管理ビューを使用してファイルをステージングまたはコミットすると、提案されたファイル変更が自動的に受け入れられます。

* _ファイルごと_の変更（追加または削除された行）が、リスト内の各項目に表示されるようになりました。

<video src="images/1_104/changed-files-list.mp4" title="Video uncollapsing the changed files list and accepting file entries to remove them from the list." autoplay loop controls muted></video>

### プロンプトファイルでカスタムチャットモードを使用

プロンプトファイルは、再利用可能なチャットプロンプトを記述する Markdown ファイルです。プロンプトファイルを実行するには、チャット入力フィールドで `/` に続けてプロンプトファイル名を入力するか、エディターでプロンプトファイルを開いているときに再生ボタンを使用します。

プロンプトファイルの実行に使用するチャットモードを指定できます。以前は、プロンプトファイルで `agent`、`edit`、`ask` などの組み込みチャットモードのみを使用できました。現在は、プロンプトファイルでカスタムチャットモードも参照できます。

![Screenshot showing IntelliSense for custom chat modes in prompt files.](images/1_104/custom_modes_in_prompt_files.png)

[VS Code でのチャットのカスタマイズ](https://code.visualstudio.com/docs/copilot/customization/overview)について詳しく学び、プロンプトファイル、チャットモード、カスタム指示を活用してください。

### プロンプトファイル提案の設定（実験的）

**設定**: `setting(chat.promptFilesRecommendations)`

チームは AI ワークフローを標準化するためにカスタムプロンプトファイルを作成することがよくありますが、これらのプロンプトはユーザーが最も必要とするときに発見しにくい場合があります。コンテキスト条件に基づいて、チャットウェルカムビューに表示されるプロンプトファイルを設定できるようになりました。

新しい `setting(chat.promptFilesRecommendations)` 設定は、シンプルなブール値とコンテキスト対応提案のための when 句式の両方をサポートします。

```jsonc
{
  "chat.promptFilesRecommendations": {
    "plan": true,                            // 常に提案
    "a11y-audit": "resourceExtname == .html", // HTML ファイルのみ
    "document": "resourceLangId == markdown", // Markdown ファイルのみ
    "debug": false                           // 提案しない
  }
}
```

これにより、チームは適切なタイミングで適切な AI ワークフローを表示し、カスタムプロンプトをワークスペースやファイルタイプにより発見しやすく関連性の高いものにできます。

### ツールセットでツールを選択

[ツールセット](https://code.visualstudio.com/docs/copilot/chat/chat-agent-mode#_define-tool-sets)は、関連するツールをグループ化する便利な方法であり、VS Code には `edit` や `search` などのいくつかの組み込みツールセットがあります。

ツールピッカーは、各ツールセットの一部であるツールを表示し、各ツールを個別に有効または無効にできるようになりました。チャットビューの `Configure Tools...` ボタンからツールピッカーにアクセスできます。

![Screenshot showing the tools picker with an expanded edit tool set, listing all available tools.](images/1_104/tools_in_toolsets.png)

### チャットで使用するフォントの設定

**設定**: `setting(chat.fontFamily)`、`setting(chat.fontSize)`

VS Code では、エディター全体で使用するフォントを選択できますが、チャットビューにはその設定機能がありませんでした。チャットメッセージのフォントファミリー（`setting(chat.fontFamily)`）とフォントサイズ（`setting(chat.fontSize)`）を設定する2つの新しい設定を追加しました。

![Screenshot showing the Chat view with a custom font and font size.](images/1_104/chat-configure-font.png)

> **注意**: リストのコンテンツは現在これらの設定をまだ尊重していませんが、これは今後のリリースで修正に取り組んでいるものです。

### コーディングエージェントとの協働（実験的）

コーディングエージェントを使用すると、タスクを AI エージェントに委任してバックグラウンドで作業させることができます。複数のエージェントを並行して作業させることができます。コーディングエージェントとより効果的に協働できるよう、チャットセッションの体験を継続的に進化させています。

#### チャットセッションビュー

**設定**: `setting(chat.agentSessionsViewLocation)`

チャットセッションビューは、ローカルと貢献されたチャットセッションの両方を管理するための単一の統合ビューを提供します。チャットセッションビューを大幅に強化し、すべての主要な操作を実行できるようになり、コーディングタスクの反復と完成がより簡単になりました。

* **ステータスバー追跡**: ステータスバーから直接複数のコーディングエージェントの進行状況を監視。
* **マルチセッションサポート**: 同じビューから複数のチャットセッションを起動および管理。
* **拡張されたコンテキストメニュー**: コーディングエージェントと効率的にやり取りするためのより多くのアクションにアクセス。
* **豊富な説明**: 豊富な説明が有効になっている場合、各リストエントリには関連情報をすばやく見つけるための詳細なコンテキストが含まれます。

#### GitHub コーディングエージェント統合

[GitHub コーディングエージェント](https://code.visualstudio.com/docs/copilot/copilot-coding-agent)とチャットセッションの統合を改善し、よりスムーズで直感的な体験を提供しています。

* **チャットエディターアクション**: コード変更の表示や適用、プルリクエストのチェックアウトをチャットエディターから直接簡単に実行。
* **シームレスな移行**: ローカルチャットから GitHub エージェントタスクへの移行の継続性を改善。
* **セッションレンダリングの改善**: より良い視覚的明瞭性のためのカードとツールレンダリングの様々な改善。
* **パフォーマンスの向上**: より応答性の高い体験のためのセッション読み込みの高速化。

<video src="images/1_104/chat-sessions-view.mp4" title="Video showing Chat Sessions view and integration with GitHub coding agents." autoplay loop controls muted></video>

#### コーディングエージェントへの委任

VS Code でローカルタスクを Copilot コーディングエージェントに委任する方法を継続的に拡張しています：

* コーディングエージェントで TODO を修正：

    `TODO` で始まるコメントに、コーディングエージェントセッションを素早く開始するコードアクションが表示されるようになりました。

    ![Screenshot of a code action above a TODO comment called Delegate to coding agent.](images/1_104/coding-agent-todo.png)

* チャットから委任（`setting(githubPullRequests.codingAgent.uiIntegration)`）：

    チャットで **Delegate to coding agent** アクションを実行すると、ファイル参照を含む追加のコンテキストが GitHub コーディングエージェントに転送されるようになりました。これにより、タスクをコーディングエージェントに渡して完了させる前に、正確にタスクを計画できます。新しいチャットエディターが開き、コーディングエージェントの進行状況がリアルタイムで表示されます。

    <video src="images/1_104/delegate-to-coding-agent.mp4" title="Delegating a task from sidebar chat to coding agent" autoplay loop controls muted></video>

_テーマ: [Sharp Solarized](https://marketplace.visualstudio.com/items?itemName=joshspicer.sharp-solarized) ([vscode.dev](https://vscode.dev/editor/theme/joshspicer.sharp-solarized) でプレビュー)_


### Google でのソーシャルサインイン

Google アカウントで GitHub Copilot にサインインまたはサインアップするオプションが一般提供され、VS Code のすべてのユーザーに展開されています。

![Screenshot showing the sign in dialog showing the option to use a Google account.](images/1_104/google.png)

詳細については、[発表 GitHub ブログ投稿](https://github.blog/changelog/2025-07-15-social-login-with-google-is-now-generally-available)をご覧ください。

### ターミナル自動承認

**設定**: `setting(chat.tools.terminal.enableAutoApprove)`

ターミナルコマンドの自動承認はエージェントのやり取りを大幅に効率化できますが、[セキュリティリスク](https://code.visualstudio.com/docs/copilot/security)も伴います。このリリースでは、使いやすさとセキュリティの両方を強化するために、ターミナル自動承認にいくつかの改善を導入しています。

* `setting(chat.tools.terminal.enableAutoApprove)` 設定でターミナル自動承認を有効または無効にできるようになりました。この設定は、[デバイス管理](https://code.visualstudio.com/docs/setup/enterprise#_centrally-manage-vs-code-settings)経由で組織によって設定することもできます。

* ターミナル自動承認が実際に有効になる前に、チャットビューのドロップダウンから明示的にオプトインする必要があります。

    ![Screenshot of a terminal command in the Chat view, showing the Enable Auto Approve dropdown.](images/1_104/terminal-auto-approve-opt-in.png)

* チャットビューから、実行中のコマンドの自動承認ルールを便利に追加したり、設定を開いたりできます：

    ![Screenshot that shows the three standard options are presented for "foo --arg && bar".](images/1_104/terminal-auto-approve-ui.png)

    _テーマ: [Sapphire](https://marketplace.visualstudio.com/items?itemName=Tyriar.theme-sapphire) ([vscode.dev](https://vscode.dev/editor/theme/Tyriar.theme-sapphire) でプレビュー)_

    これは、より適切なサブコマンドを提案する基本的なサポートを持っており、例えば `npm` よりも `npm test` ルールを提案します。

* 自動承認されたコマンドの透明性を向上させるために、チャットビューでどのルールが適用されたかを表示し、そのルールを設定できるようにしました：

    ![Screenshot showing the new links added under the tool call in the Chat view for adding new auto approve rules.](images/1_104/terminal-auto-approve-new-links.png)

* 安全性を提供し、ノイズを減らすためにデフォルトを改善しました。`settings.json` ファイルを開き、`chat.tools.terminal.autoApprove` を入力して `kbstyle(Tab)` で補完することで、設定のデフォルト値を表示してルールの完全なリストを確認できます。

* バックスラッシュまたはフォワードスラッシュ文字を含む非正規表現ルールは、パスとして扱われ、その正確なパスだけでなく、どちらのスラッシュタイプと `./` プレフィックスも許可されます。PowerShell を使用する場合、すべてのルールが大文字小文字を区別しないように強制されます。

* エージェントモードが `curl`、`wget`、`Invoke-RestMethod`、または `Invoke-WebRequest` を使用してインターネットからコンテンツを取得しようとする場合、これはプロンプトインジェクション攻撃の一般的なベクトルであるため、警告を表示するようになりました。

ドキュメントの[ターミナル自動承認](https://code.visualstudio.com/docs/copilot/chat/chat-agent-mode#_autoapprove-terminal-commands)について詳しく学んでください。

### グローバル自動承認

グローバル自動承認は[v1.99 以降の実験的設定](https://code.visualstudio.com/updates/v1_99#_agent-mode-tool-approvals)でした。私たちが観察したのは、ユーザーが結果について十分に深く考えることなくこの設定を有効にしていることです。さらに、一部のユーザーは `setting(chat.tools.autoApprove)` 設定を有効にすることがターミナル自動承認を有効にするための前提条件だと思っていましたが、これは事実ではありませんでした。

これらの誤解に対処し、ユーザーをさらに保護するために、グローバル自動承認が初めて使用されようとするときに、ユーザーが簡単に後退して設定を無効にできるよう、当然ながら恐ろしく見える警告が表示されるようになりました：

![Screenshot of a warning dialog that appears when global auto approve is used for the first time.](images/1_104/global-auto-approve-warning.png)

設定も自動移行なしに、より明確な `setting(chat.tools.global.autoApprove)` に変更されたため、すべてのユーザー（偶発的または意図的）が再度明示的に設定する必要があります。

### 数式レンダリングがデフォルトで有効

**設定**: `setting(chat.math.enabled)`

チャット応答での数式のレンダリングが一般提供され、デフォルトで有効になりました。`setting(chat.math.enabled)` 設定でこの機能を無効にできます。

![Screenshot of the Chat view, showing inline and block equations in a chat response.](images/1_104/chat-math.png)

この機能は [KaTeX](https://katex.org) によって駆動され、インライン数式とブロック数式の両方をサポートします。インライン数式は単一のドル記号（`$...$`）でマークアップを囲んで記述でき、ブロック数式は二重のドル記号（`$$...$$`）を使用します。

### チャットビューのデフォルト表示

**設定**: `setting(workbench.secondarySideBar.defaultVisibility)`

ワークスペースを初めて開くとき、チャットビューを含むセカンダリサイドバーがデフォルトで表示され、すぐに質問したりエージェントセッションを開始したりできるよう招待します。この動作は `setting(workbench.secondarySideBar.defaultVisibility)` 設定またはチャットビュー自体のドロップダウンを使用して設定できます：

![Screenshot showing Chat view menu with the option to set the default Secondary Side Bar visibility.](images/1_104/auxview.png)

### タスクサポートの改善

* 入力要求の検出

    エージェントモードでタスクやターミナルコマンドを実行すると、エージェントはプロセスがユーザー入力を要求したときを検出し、チャットで応答するよう促されます。プロンプトが表示されている間にターミナルで入力すると、プロンプトは自動的に非表示になります。オプションと説明が提供される場合（`[Y] Yes [N] No` など）、これらは確認プロンプトに表示されます。

    <video src="images/1_104/prompt-input-demo.mp4" title="Example of input being detected and responded to" autoplay loop controls muted></video>

* 問題マッチャーを使用するタスクのエラー検出

    問題マッチャーを使用するタスクでは、エージェントは言語モデルに出力を評価させるのではなく、問題マッチャーの結果に基づいてエラーを収集して表示するようになりました。問題はチャット進行メッセージ内のドロップダウンに表示され、問題の場所に直接移動できます。これにより、現在のタスク実行に関連する場合にのみエラーが報告されることが保証されます。

* 複合タスクサポート

    エージェントモードが複合タスクの実行をサポートするようになりました。複合タスクを実行すると、エージェントはユーザー入力のプロンプトを含む、各依存タスクの進行状況と出力を示します。これにより、より複雑なワークフローと複数ステップのタスク実行への可視性が向上します。

    以下の例では、VS Code - Build タスクが実行されます。各依存タスクの出力が評価され、問題が応答と進行メッセージドロップダウンでユーザーに表示されます。

    <video src="images/1_104/build-task.mp4" title="Example of agent running the VS Code - Build task" autoplay loop controls muted></video>

### ターミナルサポートの改善

* より多くのターミナルツールをコアに移動

    [前回のリリースの `runInTerminal` ツール](https://code.visualstudio.com/updates/v1_103#_improved-reliability-and-performance-of-the-run-in-terminal-and-task-tools)と同様に、`terminalSelection` と `terminalLastCommand` ツールが拡張機能からコアに移動され、一般的な信頼性の向上が提供されるはずです。

* 設定可能なターミナルツールシェル統合タイムアウト

    `runInTerminal` ツールがターミナルを作成しようとするときは常に、シェル統合がアクティブになるまでの期間待機します。シェルの起動が特に遅い場合（非常に重い PowerShell プロファイルがある場合など）、これまでの固定された5秒のタイムアウトを待機してもまだ最終的に失敗する可能性があります。このタイムアウトは `setting(chat.tools.terminal.shellIntegrationTimeout)` 設定で設定可能になりました。

* コマンドプロンプトの使用を防止

    コマンドプロンプトでは、少なくとも Copilot が必要とする機能でのシェル統合が実際には不可能なため、Copilot はデフォルトでシェル統合を持つはずの Windows PowerShell を使用することを選択するようになりました。これにより、デフォルトシェルがコマンドプロンプトの場合の `runInTerminal` ツールの信頼性が向上するはずです。

    何らかの理由で Copilot にコマンドプロンプトを使用させたい場合、これは現在不可能です。Copilot が使用するターミナルプロファイルをカスタマイズする機能を間もなく追加する予定で、これは [#253945](https://github.com/microsoft/vscode/issues/253945) で追跡されています。

### Todo リストツール

Todo リストツールは、エージェントが複雑な複数ステップのタスクをより小さなタスクに分解し、個々の項目を追跡するのに役立つ進行状況を報告するのに役立ちます。このツールに改善を加え、現在はデフォルトで有効になっています。

ツールの進行状況は、チャットビューの上部にある Todo コントロールに表示され、Todo リストが処理されるにつれて自動的に折りたたまれ、進行中の現在のタスクのみを表示します。

### ツール呼び出しのスキップ

エージェントがツール呼び出しの確認を要求したときに、ツール呼び出しをスキップしてエージェントを続行させることを選択できるようになりました。チャット入力ボックスから引き続きリクエストをキャンセルしたり、新しいリクエストを入力したりできます。

### セマンティックワークスペース検索の改善

ワークスペースでコードのセマンティック検索のために新しい[埋め込み](https://en.wikipedia.org/wiki/Embedding_(machine_learning))モデルを使用するように `#codebase` ツールをアップグレードしました。この新しいモデルは、コード検索のより良い結果を提供します。新しい埋め込みは、各埋め込みの以前のモデルのディスク上のストレージサイズのわずか6%しか必要とせず、より少ないストレージ容量を使用します。

この新しい埋め込みモデルを今後数週間で段階的に展開します。ワークスペースは、この新しい埋め込みモデルを使用するよう自動的に更新されるため、アクションは必要ありません。展開される前に試してみたい場合は、VS Code Insiders がすでに新しいモデルを使用しています。

### GitHub Copilot AI 機能の非表示と無効化

**設定**: `setting(chat.disableAIFeatures)`

チャット、コード補完、次の編集提案を含む、GitHub Copilot によって提供される組み込み AI 機能を無効にして非表示にするための新しい設定 `setting(chat.disableAIFeatures)` を導入しています。

この設定は、以前に設置していたソリューションと比較して以下の利点があります：

* 明示的に無効にしない限り、デバイス間で同期
* インストールされている場合は Copilot 拡張機能を無効化
* プロファイルごとまたはワークスペースごとに設定を構成し、AI 機能を選択的に無効にすることが簡単

「AI Features を非表示」のコマンドがこの変更を反映するように名前が変更され、設定エディターでこの新しい設定を表示するようになりました。

> **注意**: 以前に AI 機能を非表示にしていたユーザーは、引き続き AI 機能が非表示になっているのを確認できます。デバイス間で選択を同期したい場合は、さらに設定を更新できます。

## MCP

### サーバー指示のサポート

VS Code は MCP サーバー指示を読み取り、ベースプロンプトに含めるようになりました。

### MCP 自動発見がデフォルトで無効

**設定**: `setting(chat.mcp.discovery.enabled)`

VS Code は Claude Code などの他のアプリにインストールされた [MCP サーバーの自動発見](https://code.visualstudio.com/docs/copilot/customization/mcp-servers#_add-an-mcp-server)をサポートしています。VS Code で MCP サポートが成熟したため、自動発見はデフォルトで無効になりましたが、`setting(chat.mcp.discovery.enabled)` 設定を使用して再有効化できます。

### MCP を有効にする

**設定**: `setting(chat.mcp.access)`

以前に MCP サーバーが VS Code で実行できるかどうかを制御していた `chat.mcp.enabled` 設定は、より説明的なオプションを持つ新しい `setting(chat.mcp.access)` 設定に移行されました：

* `all`: すべての MCP サーバーの実行を許可（以前の `true` 値と同等）
* `none`: MCP サポートを完全に無効化（以前の `false` 値と同等）

## アクセシビリティ

### チャット確認アクションにフォーカス

**Focus Chat Confirmation** コマンド `(kb(workbench.action.chat.focusConfirmation))` を追加しました。これは確認ダイアログが存在する場合にフォーカスするか、スクリーンリーダーユーザーに確認が不要であることをアナウンスします。

## コード編集

### 設定可能なインライン提案遅延

**設定**: `setting(editor.inlineSuggest.minShowDelay)`

新しい設定 `setting(editor.inlineSuggest.minShowDelay)` により、入力後にインライン提案が表示される速度を設定できます。提案があまりにも速く表示されて入力の邪魔になると感じる場合に役立ちます。

## エディターエクスペリエンス

### Windows でのウィンドウ境界色サポート

**設定**: `setting(window.border)`

Windows で VS Code ウィンドウの周りに色付きの境界を表示できる新しい設定 `setting(window.border)` を追加できて嬉しく思います。この設定には以下のオプションがあります：

* `default`: カラーテーマ設定を尊重し、Windows 設定にフォールバック
* `system`: Windows 設定のみを尊重（ウィンドウタイトルアクセントカラー）
* `off`: 境界色を無効化
* `<color>`: Hex、RGB、RGBA、HSL、HSLA 形式の特定の色

ワークスペースごとに色を設定でき、どのワークスペースがどのウィンドウで開かれているかを区別しやすくなります。

![Screenshot of several VS Code windows with different border colors.](images/1_104/border.png)

`setting(window.border)` を `default` として設定すると、テーマは `window.activeBorder` と `window.inactiveBorder` の色キーを使用してアクティブおよび非アクティブウィンドウの境界色を設定できます。`setting(workbench.colorCustomizations)` 設定からこれらの色をさらにオーバーライドできます。

### 拡張機能アカウント設定の管理

コマンドパレットに **Accounts: Manage Extension Account Preferences** コマンドを追加しました。呼び出されると、認証アカウントにアクセスできる拡張機能のリストを表示し、それらの拡張機能が使用するアカウントを変更できます。リストから直接新しいアカウントにサインインすることも可能です。

これは[1年前に追加したアカウント管理機能](https://code.visualstudio.com/updates/v1_94#_change-an-extensions-account-preference)を基に構築されています。

### エディタータブインデックス

**設定**: `setting(workbench.editor.showTabIndex)`

エディタータブのインデックスをタブのラベルに表示できるようになりました。多くのタブを開いていて、キーボードショートカットを使用してそれらの間を素早く移動したい場合に役立ちます。`setting(workbench.editor.showTabIndex)` 設定でこの機能を有効にします。

![Screenshot of editor tabs with numbers in front of them, indicating their index.](images/1_104/editorTabIndex.png)

### エディタータブバースクロールバーの表示

**設定**: `setting(workbench.editor.titleScrollbarVisibility)`

`setting(workbench.editor.titleScrollbarVisibility)` により、エディタータブバーのスクロールバーがいつ表示されるかを制御できます。デフォルト値 `auto` は、タブがオーバーフローしてタブがホバーされたときのみスクロールバーを表示します。タブがオーバーフローしたときに常にスクロールバーを表示するには `visible` に設定するか、表示しないようにするには `hidden` に設定することもできます。

### 問題レポーターの改善

組み込みの問題レポーターを介して VS Code または拡張機能の問題を報告する際、レポートボタンのドロップダウンから **Create on GitHub** または **Preview on GitHub** のいずれかを選択できるようになりました。ボタンがドロップダウンを表示せず、Create または Preview のみを表示する場合、これは拡張機能データをまだ読み込み中であるか、正しいスコープを提供する GitHub アカウントでサインインしていることを確認する必要があることを意味している可能性があります。

![Screenshot of a dropdown showing Create on Github and Preview on Github in the issue reporter.](images/1_104/issue-reporter-dropdown.png)

## ノートブック

### NES 提案の改善（実験的）

**設定**: `setting(github.copilot.chat.notebook.enhancedNextEditSuggestions.enabled)`

ノートブックの次の編集提案の品質を向上させる実験を行っています。現在、言語モデルは提案を生成する際にアクティブセルのコンテンツにアクセスできます。`setting(github.copilot.chat.notebook.enhancedNextEditSuggestions.enabled)` 設定を有効にすると、言語モデルはノートブック全体にアクセスでき、より正確で高品質な次の編集提案を生成できます。

## ソース管理

### Git ワークツリー変更のプレビューと移行

ワークツリーファイルと現在のワークスペースの違いを、ソース管理変更ビューでワークツリーファイルを右クリックしてコンテキストメニューを開き、**Compare with Workspace** を選択することでプレビューできるようになりました。

![Screenshot of the context menu shown in the SCM view on a changed file in a worktree, with the Compare with Workspace option selected.](images/1_104/image.png)

変更を確認した後、コマンドパレットから **Migrate Worktree Changes...** コマンド（`kb(git.migrateWorktreeChanges)`）を使用して、ワークツリーからのすべての変更を現在のワークスペースにマージできます。これにより、複数のワークツリー間で作業し、変更を選択的にメインリポジトリに戻すことが簡単になります。

[VS Code での Git ワークツリー](https://code.visualstudio.com/docs/sourcecontrol/overview#_worktrees)について詳しく学んでください。

## ターミナル

### ターミナルウィンドウの発見しやすさと洗練

一般的なリクエストは、ターミナルを別のウィンドウで開けるようにすることです。この機能は約1年半前から存在していましたが、特に発見しやすいものではありませんでした。このイテレーションでは、この機能に複数のエントリーポイントを追加しました：

* 新しいコマンド `kb(workbench.action.terminal.newInNewWindow)`。
* 空のエディターとタブウェルメニューに **New Terminal** エントリー。
* 新しいターミナルドロップダウンが再配置され、**New Terminal Window** エントリーが追加。
* トップレベルのターミナルメニューに **New Terminal Window** エントリー。

これらの新しいターミナルウィンドウがコンパクトモードで開く体験も洗練しました。ウィンドウに新しいタブを追加すると、自動的にコンパクトモードを終了します。

![Screenshot of the terminal window open in compact mode, hiding tabs to make more room for terminal content.](images/1_104/terminal-window.png)

### ターミナルエディターでのターミナルアクション

ターミナルビューで利用可能なアクション（新しいターミナルドロップダウン、ターミナルのクリアなど）が、エディターエリアとターミナルウィンドウのターミナルでも利用できるようになりました。

![Screenshot of different terminal actions in the editor actions menu.](images/1_104/terminal-editor-actions.png)

ターミナルビューと同様に、アクションエリアを右クリックしてオーバーフローメニューから移動できます。

### ターミナル IntelliSense の改善（プレビュー）

ターミナル IntelliSense は、このリリースでいくつかの改善を受けています：

* 複数のパフォーマンス改善、これらは Windows での体験に不釣り合いに影響します。
* Windows で利用できない `sed` 依存関係の除去により、`git` 補完が Windows でより信頼性が高くなりました。
* `git` 補完に、コミット、ブランチ、リモート、スタッシュ、タグを表す馴染みのあるアイコンが追加されました。
    ![Screenshot of new icons showing for tags and branches on completions for "git checkout"](images/1_104/terminal-suggest.png)
* 多数の補完仕様が追加されました：`adb`、`basename`、`bundle`、`clear`、`cut`、`date`、`dd`、`diff`、`dig`、`dirname`、`docker-compose`、`docker`、`dotnet`、`env`、`export`、`fdisk`、`fmt`、`fold`、`gh`、`go`、`htop`、`id`、`jq`、`ln`、`lsblk`、`lsof`、`mount`、`nl`、`od`、`paste`、`ping`、`pkill`、`readlink`、`rsync`、`ruby`、`ruff`、`sed`、`seq`、`shred`、`sort`、`source`、`split`、`stat`、`su`、`sudo`、`tac`、`tar`、`tee`、`time`、`tr`、`traceroute`、`tree`、`truncate`、`uniq`、`unzip`、`wc`、`where`、`whereis`、`which`、`who`、`xargs`、`xxd`、`yo`、`zip`

### ターミナルスティッキースクロールの改善

ターミナルスティッキースクロールをデフォルトで有効にしました。ページャーを使用するときの動作の改善など、より良い体験のためにいくつかの改善を行いました。ターミナルスティッキースクロールは `setting(editor.tabFocusMode)` 設定と互換性があります。

## 言語

### JavaScript と TypeScript

使用状況数を確認した後、組み込みの `bower.json` IntelliSense を削除することにしました。Bower は [2017年から非推奨](https://bower.io/blog/2017/how-to-migrate-away-from-bower/)であり、組み込みサポートはほとんど使用されておらず、積極的にメンテナンスされていませんでした。

Bower は、ユーザーが `npm` または `yarn` に移行することを推奨しています。VS Code での Bower の継続的なサポートは拡張機能によって提供できます。

### Python

#### Pipenv の Python Environments 拡張機能サポート

Pipenv 環境が Python 拡張機能と同様に発見および選択できるようになりました。さらに、Python サイドバーの **Environment Manager** ビューに表示され、他の環境タイプとともにグループ化されて表示されます。

![Screenshot showing the Python sidebar with Pipenv environments expanded.](images/1_104/pipenv-supported-screenshot.png)

#### 環境変数注入の設定

新しい設定 `setting(python.useEnvFile)` は、Python Environments 拡張機能が有効な場合に、`.env` ファイルと `setting(python.envFile)` 設定からの環境変数がターミナルに注入されるかどうかを制御します。

#### Python Environments 拡張機能の改善

[Python Environments Extension](https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs) は、安定ユーザーへの制御された展開の一部として、バグ修正と改善を継続的に受けています。展開中に Python Environments 拡張機能を使用するには、拡張機能がインストールされていることを確認し、VS Code の `settings.json` ファイルに次を追加してください：`"python.useEnvironmentsExtension": true`。

#### Pylance での AI駆動ホバー要約（実験的）

Pylance の最新プレリリース版を使用する場合、Python 用の新しい実験的な AI ホバー要約機能が利用できるようになりました。`setting(python.analysis.aiHoverSummaries)` 設定を有効にすると、まだドキュメントがないシンボルに対してその場で役立つ要約を取得できます。これにより、馴染みのないコードを理解しやすくなり、Python プロジェクトを探索する際の生産性が向上します。AI ホバー要約は現在、GitHub Copilot Pro、Pro+、および Enterprise ユーザーが利用できます。

<video src="images/1_104/pylance-hover-summaries.mp4" title="Video showing AI-powered hover summaries with Pylance." autoplay loop controls muted></video>

この実験的な体験を間もなく安定版拡張機能に提供することを楽しみにしています。

#### コードスニペット実行ツール

`python -c "code"` のようなターミナルコマンドに依存したり、実行される一時ファイルを作成したりする代わりに、Pylance コードスニペット実行ツールは GitHub Copilot が Python スニペットを完全にメモリ内で実行できるようにします。ワークスペース用に設定された正しい Python インタープリターを自動的に使用し、ターミナル実行中に時々発生するシェルエスケープと引用符の一般的な問題を排除します。

際立った利点の1つは、明確性のために stdout と stderr をインターリーブした、クリーンで整形された出力を提供することです。これにより、GitHub Copilot でエージェントモードを使用して小さなコードブロックをテストしたり、クイックスクリプトを実行したり、Python 式を検証したり、インポートをチェックしたりする際に、すべてワークスペースのコンテキスト内で理想的になります。

試すには、Pylance 拡張機能の最新プレリリース版を使用していることを確認してください。その後、チャットビューの **Add context...** > **Tools** メニューから `pylancerunCodeSnippet` ツールを選択できます。

> **注意**: すべての AI生成コードと同様に、このツールの実行を許可する前に生成されたコードを検査してください。コードのロジックと意図を確認することで、プロジェクトの目標に合致し、安全性と正確性を維持することが保証されます。

<video src="images/1_104/pylance-run-code-snippet.mp4" title="Code snippet generated and executed by GitHub Copilot in the Chat panel via the pylancerunCodeSnippet tool." autoplay loop controls muted></video>

#### すべての Python ドキュメントで Pylance IntelliSense が有効

最新の Pylance プレリリース版では `python.analysis.supportAllPythonDocuments` 設定が削除され、ターミナルと差分ビューを含むすべての Python ドキュメントで Pylance IntelliSense がデフォルトで有効になりました。これは、VS Code で Python を使用する場所ならどこでも、豊富なコード補完、ホバー、コードナビゲーションを取得できることを意味します。

#### アクティベーションフック

Python アクティベーションフックは、Python environment 拡張機能がシェルプロファイルを変更する必要なく、シェル統合スクリプトから実行できるようになりました。これにより、`setting(python-envs.terminal.autoActivationType)` が `shellStartup` に設定されている場合により信頼性の高いターミナルアクティベーションが提供され、重要なことに、Copilot ターミナルが期待どおりにアクティベートされることが保証されます。

## 拡張機能への貢献

### GitHub Pull Requests

プルリクエストと課題の作業、作成、管理を可能にする [GitHub Pull Requests](https://marketplace.visualstudio.com/items?itemName=GitHub.vscode-pull-request-github) 拡張機能でさらなる進歩がありました。新機能には以下が含まれます：

* 狭いウィンドウでサイドバーコンテンツが折りたたまれる
* リロード後にプルリクエストと課題の webview が復元される
* 新しい「TODO」コードアクションにより、Copilot コーディングエージェントに直接委任できる
* `setting(githubPullRequests.ignoreSubmodules)` でサブモジュールを無視できる

拡張機能の [0.118.0 リリースの変更ログ](https://github.com/microsoft/vscode-pull-request-github/blob/main/CHANGELOG.md#01180)を確認して、リリースのすべてについて学んでください。

## 拡張機能の作成

### 拡張機能起動ターミナル用の shellIntegrationNonce

`shellIntegrationNonce` を `TerminalOptions` と `ExtensionTerminalOptions` の `createTerminal` に渡せるようになりました。これにより、拡張機能が [シェル統合エスケープシーケンス](https://code.visualstudio.com/docs/terminal/shell-integration#_supported-escape-sequences)でコマンドを検証するために使用される nonce を制御できます。

### Language Model Chat Provider API

このイテレーションで、`LanguageModelChatProviders` API を最終化しました。これにより、拡張機能がクラウドホストまたはローカルの1つ以上の言語モデルを提供できます。拡張機能をインストールすることで、ユーザーはチャットのモデルピッカーを通じてこれらのモデルを選択できます。

[AI Toolkit for VS Code](https://aka.ms/AIToolkit)、[Cerebras Inference](https://aka.ms/vscode/cerebras)、[Hugging Face](https://aka.ms/vscode/huggingface) を含め、この API を活用して VS Code のチャットを追加モデルで拡張する複数の拡張機能がすでに存在します。

この API の活用方法については、[Language Model Chat Provider 拡張機能ガイド](https://code.visualstudio.com/api/extension-guides/ai/language-model-chat-provider)または[拡張機能サンプル](https://github.com/microsoft/vscode-extension-samples/tree/main/chat-model-provider-sample)で詳しく学ぶことができます。

> **注意**: この API を通じて提供されるモデルは、現在[個人の GitHub Copilot プラン](https://docs.github.com/en/copilot/concepts/billing/individual-plans)のユーザーのみが利用できます。

## 提案された API

### 認証: `getSession` での `WWW-Authenticate` チャレンジのサポート

HTTP の確立されたパターンは、API へのリクエストが _auth challenges_ を定義する [WWW-Authenticate](https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/WWW-Authenticate) ヘッダーとともに 401 Unauthorized ステータスコードを返すことができることです。これらは本質的に、API が 401 を解決するために必要なものです。

これらのチャレンジを認証プロバイダーに渡して処理できる提案された API を導入しました。まず、呼び出し側から次のようにチャレンジを渡すことができます：

```ts
export interface AuthenticationWWWAuthenticateRequest {
	/**
	 * The raw WWW-Authenticate header value that triggered this challenge.
	 */
	readonly wwwAuthenticate: string;

	/**
	 * Optional scopes for the session.
	 */
	readonly scopes?: readonly string[];
}

export namespace authentication {
		// NOTE: The only change is the 2nd parameter, the other variations of `getSession` have the same change
		export function getSession(providerId: string, scopeListOrRequest: ReadonlyArray<string> | AuthenticationWWWAuthenticateRequest, options?: AuthenticationGetSessionOptions): Thenable<AuthenticationSession | undefined>;
}
```
